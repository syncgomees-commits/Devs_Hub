local Xan
do
    local url = "https://xan.bar/init.lua"
    local ok, body = pcall(function()
        return game:HttpGet(url)
    end)

    if ok and type(body) == "string" then
        local fn, loadErr = loadstring(body)
        if fn then
            local ok2, res = pcall(fn)
            if ok2 and res then
                Xan = res
            else
                warn("HOLUB HUB: Failed to execute Xan library: " .. tostring(res))
            end
        else
            warn("HOLUB HUB: Failed to load Xan library: " .. tostring(loadErr))
        end
    else
        warn("HOLUB HUB: HttpGet failed or returned non-string: " .. tostring(body))
    end
end

if not Xan then
    warn("HOLUB HUB: Xan library not available, aborting script to avoid nil call errors.")
    return
end

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local UserGui = LocalPlayer:WaitForChild("PlayerGui")

--// SUPPRESS ASSET LOAD WARNINGS
local oldWarn = warn
local oldPrint = print

warn = function(...)
    local args = {...}
    local message = table.concat(args, " ")
    -- Suppress sound and animation load errors
    if not string.find(message, "Failed to load sound") and 
       not string.find(message, "Failed to load animation") then
        oldWarn(...)
    end
end

--// ANDROID DETECTION
local IsAndroid = UserInputService.TouchEnabled

--// CONFIG
local Config = {
    Aimlock = false,
    ESP = false,
    Noclip = false,
    InfJump = false,
    JumpHack = false,
    SpeedHack = false,
    Fly = false,
    FlySpeed = 50,
    WalkSpeed = 16,
    JumpPower = 50,
    TargetPlr = nil,
    AimRange = 1000,
    HitParts = {Head = true, Chest = true},
    DebugEnabled = false,
    StealSpeed = false,
    StealMultiplier = 2
}

--// STORE
local Connections = {}
local Objects = {}
local TouchButtons = {} -- Botões virtuais para Android

--// ANDROID TOUCH INPUT HANDLER
local function CreateAndroidButtons()
    if not IsAndroid then return end
    
    local TouchFrame = Instance.new("Frame")
    TouchFrame.Name = "AndroidButtons"
    TouchFrame.Size = UDim2.new(1, 0, 1, 0)
    TouchFrame.BackgroundTransparency = 1
    TouchFrame.Parent = UserGui
    
    local buttonConfigs = {
        {Name = "FlyBtn", Pos = UDim2.new(0, 10, 0.5, -25), Color = Color3.fromRGB(0, 150, 255)},
        {Name = "SpeedBtn", Pos = UDim2.new(0, 10, 0.6, -25), Color = Color3.fromRGB(0, 200, 0)},
        {Name = "AimBtn", Pos = UDim2.new(0, 10, 0.4, -25), Color = Color3.fromRGB(255, 0, 0)},
        {Name = "EspBtn", Pos = UDim2.new(0, 10, 0.7, -25), Color = Color3.fromRGB(255, 200, 0)},
        {Name = "TeleBtn", Pos = UDim2.new(0.9, -50, 0.5, -25), Color = Color3.fromRGB(150, 0, 255)},
    }
    
    for _, cfg in pairs(buttonConfigs) do
        local btn = Instance.new("TextButton")
        btn.Name = cfg.Name
        btn.Size = UDim2.new(0, 50, 0, 50)
        btn.Position = cfg.Pos
        btn.BackgroundColor3 = cfg.Color
        btn.TextSize = 10
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        btn.TextScaled = true
        btn.BorderSizePixel = 0
        btn.BackgroundTransparency = 0.3
        btn.Parent = TouchFrame
        
        table.insert(TouchButtons, {Button = btn, Name = cfg.Name})
    end
    
    return TouchFrame
end

local AndroidButtonFrame = CreateAndroidButtons()

--// DPAD SIMULATION FOR ANDROID
local function GetAndroidMovementInput()
    local dir = Vector3.zero
    local touchPositions = TouchGuiService:GetTouchPositions() if IsAndroid and touchPositions then
        for _, touchPos in pairs(touchPositions) do
            local guiPos = UserGui.AbsoluteSize.X / 2
            local touchX = touchPos.X - guiPos
            local touchY = touchPos.Y
            
            if math.abs(touchX) > 100 or math.abs(touchY) > 100 then
                if touchX > 100 then dir = dir + Camera.CFrame.RightVector end
                if touchX < -100 then dir = dir - Camera.CFrame.RightVector end
                if touchY > 100 then dir = dir - Vector3.new(0, 1, 0) end
                if touchY < -100 then dir = dir + Vector3.new(0, 1, 0) end
            end
        end
    end
    return dir
end

--// 1. SPLASH SCREEN (Priority)
-- Shows first, plays for 2 seconds
Xan.Splash(
    {
        Title = "HOLUB HUB",
        Subtitle = "System Initialization...",
        Duration = 2,
        Theme = "Midnight"
    }
)

--// 2. GAME DETECTION (Async during splash)
local GameName = "Unknown Game"
local GameIcon = Xan.Logos.Default

task.spawn(
    function()
        pcall(
            function()
                local info = MarketplaceService:GetProductInfo(game.PlaceId)
                GameName = info.Name
            end
        )

        local success, response =
            pcall(
            function()
                local r =
                    (syn and syn.request) or (http and http.request) or http_request or (fluxus and fluxus.request) or
                    request
                if r then
                    return r(
                        {
                            Url = "https://api.xan.bar/api/games/lookup?name=" .. HttpService:UrlEncode(GameName),
                            Method = "GET"
                        }
                    )
                end
            end
        )

        if success and response and response.StatusCode == 200 then
            local data = HttpService:JSONDecode(response.Body)
            if data.success and data.game then
                GameIcon = data.game.backup_rbxasset or data.game.rbxthumb
            end
        elseif Xan.GameIcons[GameName] then
            GameIcon = Xan.GameIcons[GameName]
        end
    end
)

--// LOADING SEQUENCE
-- Wait for splash (2s) + requested gap (1s) before showing Window
task.wait(2.2)
task.wait(1)

--// 3. WINDOW
local Window =
    Xan:CreateWindow(
    {
        Title = "HOLUB HUB",
        Subtitle = GameName,
        Theme = "Midnight",
        Size = UDim2.new(0, 580, 0, 450),
        ShowActiveList = true,
        ShowLogo = true,
        Logo = GameIcon,
        ConfigName = "HolubHub"
    }
)

Xan.MobileToggle({Window = Window, Position = UDim2.new(0.85, 0, 0.1, 0), Visible = true})

local Watermark =
    Xan.Watermark(
    {
        Text = "HOLUB HUB | " .. os.date("%X"),
        Visible = true,
        ShowFPS = true,
        ShowPing = true,
        Theme = "Midnight"
    }
)

task.spawn(
    function()
        while Window do
            Watermark:SetText("HOLUB HUB | " .. os.date("%X"))
            task.wait(1)
        end
    end
)

--// 4. GUI TABS
local MainTab = Window:AddTab("Main", Xan.Icons.Home)
local ConfigTab = Window:AddTab("Config", Xan.Icons.Settings)
local PlayerTab = Window:AddTab("Player", Xan.Icons.Person)
local DevsTab = Window:AddTab("Devs", Xan.Icons.Code)

--// MAIN: COMBAT
MainTab:AddSection("Combat")

local AimToggle =
    MainTab:AddToggle(
    "Aimlock",
    "aim_state",
    function(v)
        Config.Aimlock = v
    end
)
MainTab:AddKeybind(
    "Aimlock Key [G]",
    "aim_key",
    Enum.KeyCode.G,
    function()
        AimToggle:Set(not AimToggle.Value())
    end
)
MainTab:AddSlider(
    "Aim FOV",
    "aim_fov",
    {Min = 100, Max = 2000, Default = 1000},
    function(v)
        Config.AimRange = v
    end
)

MainTab:AddCharacterPreview(
    {
        Name = "Hitbox Targeting",
        HitboxParts = {"Head", "Chest", "Arms", "Legs"},
        Default = {Head = true, Chest = true},
        Callback = function(val)
            Config.HitParts = val
        end
    }
)

--// MAIN: VISUALS
MainTab:AddSection("Visuals")

local EspToggle =
    MainTab:AddToggle(
    "X-Ray (Chams)",
    "esp_state",
    function(v)
        Config.ESP = v
        if not v then
            for _, o in pairs(Objects) do
                if o.Name == "HLCache" then
                    o:Destroy()
                end
            end
            return
        end
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and not p.Character:FindFirstChild("HLCache") then
                local hl = Instance.new("Highlight")
                hl.Name = "HLCache"
                hl.FillColor = Color3.fromRGB(255, 0, 0)
                hl.OutlineColor = Color3.fromRGB(255, 255, 255)
                hl.FillTransparency = 0.5
                hl.Parent = p.Character
                table.insert(Objects, hl)
            end
        end
    end
)
MainTab:AddKeybind(
    "X-Ray Key [H]",
    "esp_key",
    Enum.KeyCode.H,
    function()
        EspToggle:Set(not EspToggle.Value())
    end
)
MainTab:AddCrosshair("Crosshair", {Enabled = false})

--// MAIN: MOVEMENT
MainTab:AddSection("Movement")

local FlightTog =
    MainTab:AddToggle(
    "Fly Hack",
    "fly_hack",
    function(v)
        Config.Fly = v
        if not v and LocalPlayer.Character then
            LocalPlayer.Character.Humanoid.PlatformStand = false
        end
    end
)
MainTab:AddKeybind(
    "Fly Key [F]",
    "fly_key",
    Enum.KeyCode.F,
    function()
        FlightTog:Set(not FlightTog.Value())
    end
)
MainTab:AddSlider(
    "Fly Speed",
    "fly_val",
    {Min = 10, Max = 300, Default = 50},
    function(v)
        Config.FlySpeed = v
    end
)

local SpeedTog =
    MainTab:AddToggle(
    "Speed Hack",
    "speed_hack",
    function(v)
        Config.SpeedHack = v
        if not v and LocalPlayer.Character then
            LocalPlayer.Character.Humanoid.WalkSpeed = 16
        end
    end
)
MainTab:AddKeybind(
    "Speed Key [J]",
    "speed_key",
    Enum.KeyCode.J,
    function()
        SpeedTog:Set(not SpeedTog.Value())
    end
)
MainTab:AddSlider(
    "Walk Speed",
    "speed_val",
    {Min = 16, Max = 300, Default = 16},
    function(v)
        Config.WalkSpeed = v
    end
)

local JumpTog =
    MainTab:AddToggle(
    "Jump Hack",
    "jump_hack",
    function(v)
        Config.JumpHack = v
        if not v and LocalPlayer.Character then
            LocalPlayer.Character.Humanoid.JumpPower = 50
        end
    end
)
MainTab:AddKeybind(
    "Jump Key [K]",
    "jump_key",
    Enum.KeyCode.K,
    function()
        JumpTog:Set(not JumpTog.Value())
    end
)
MainTab:AddSlider(
    "Jump Power",
    "jump_val",
    {Min = 50, Max = 500, Default = 50},
    function(v)
        Config.JumpPower = v
    end
)

local NoclipTog =
    MainTab:AddToggle(
    "No Clip",
    "noclip_hack",
    function(v)
        Config.Noclip = v
    end
)
MainTab:AddKeybind(
    "No Clip Key [N]",
    "noclip_key",
    Enum.KeyCode.N,
    function()
        NoclipTog:Set(not NoclipTog.Value())
    end
)

local InfJumpTog =
    MainTab:AddToggle(
    "Inf Jump",
    "inf_jump",
    function(v)
        Config.InfJump = v
    end
)
MainTab:AddKeybind(
    "Inf Jump Key [L]",
    "inf_jump_key",
    Enum.KeyCode.L,
    function()
        InfJumpTog:Set(not InfJumpTog.Value())
    end
)

--// MAIN: TELEPORT
MainTab:AddSection("Teleport")

local function GetPlayerNames()
    local names = {}
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then
            table.insert(names, p.Name)
        end
    end
    table.sort(names)
    if #names == 0 then
        table.insert(names, "No Other Players")
    end
    return names
end

local TpDropdown =
    MainTab:AddDropdown(
    "Select Player",
    "tp_target",
    GetPlayerNames(),
    function(v)
        Config.TargetPlr = Players:FindFirstChild(v)
    end
)

Connections["PlrAdded"] =
    Players.PlayerAdded:Connect(
    function()
        TpDropdown:SetOptions(GetPlayerNames())
    end
)
Connections["PlrRemoved"] =
    Players.PlayerRemoving:Connect(
    function()
        TpDropdown:SetOptions(GetPlayerNames())
    end
)

MainTab:AddButton(
    "Refresh Dropdown",
    function()
        TpDropdown:SetOptions(GetPlayerNames())
    end
)

MainTab:AddButton(
    "Teleport [U]",
    function()
        if Config.TargetPlr and Config.TargetPlr.Character then
            LocalPlayer.Character:SetPrimaryPartCFrame(
                Config.TargetPlr.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 4)
            )
            Xan.Notify({Title = "Teleport", Content = "Teleported to " .. Config.TargetPlr.Name})
        else
            Xan.Notify({Title = "Error", Content = "Invalid target.", Type = "Error"})
        end
    end
)

MainTab:AddSpeedometer("HUD Speed", {Min = 0, Max = 200, AutoTrack = true})

--// PLAYER TAB
PlayerTab:AddSection("Character")

PlayerTab:AddButton(
    "Reset Speed",
    function()
        if LocalPlayer.Character then
            LocalPlayer.Character.Humanoid.WalkSpeed = 16
            Xan.Notify({Title = "Character", Content = "Walk speed reset to 16"})
        end
    end
)

PlayerTab:AddButton(
    "Reset Jump",
    function()
        if LocalPlayer.Character then
            LocalPlayer.Character.Humanoid.JumpPower = 50
            Xan.Notify({Title = "Character", Content = "Jump power reset to 50"})
        end
    end
)

PlayerTab:AddButton(
    "Reset All",
    function()
        if LocalPlayer.Character then
            local h = LocalPlayer.Character:FindFirstChild("Humanoid")
            if h then
                h.WalkSpeed = 16
                h.JumpPower = 50
                h.PlatformStand = false
                Xan.Notify({Title = "Character", Content = "All stats reset"})
            end
        end
    end
)

PlayerTab:AddSection("Equipment")

PlayerTab:AddButton(
    "Remove All Tools",
    function()
        if LocalPlayer.Character then
            for _, tool in pairs(LocalPlayer.Character:FindFirstChild("Backpack") and LocalPlayer.Character.Backpack:GetChildren() or {}) do
                if tool:IsA("Tool") then
                    tool:Destroy()
                end
            end
            Xan.Notify({Title = "Equipment", Content = "All tools removed"})
        end
    end
)

PlayerTab:AddButton(
    "Drop All Tools",
    function()
        if LocalPlayer.Backpack then
            for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
                if tool:IsA("Tool") then
                    tool.Parent = workspace
                end
            end
            Xan.Notify({Title = "Equipment", Content = "All tools dropped"})
        end
    end
)

PlayerTab:AddSection("Health")

PlayerTab:AddButton(
    "Heal",
    function()
        if LocalPlayer.Character then
            local h = LocalPlayer.Character:FindFirstChild("Humanoid")
            if h then
                h.Health = h.MaxHealth
                Xan.Notify({Title = "Health", Content = "Healed to full health"})
            end
        end
    end
)

local HealthSlider = PlayerTab:AddSlider(
    "Health Value",
    "health_val",
    {Min = 1, Max = 100, Default = 100},
    function(v)
        if LocalPlayer.Character then
            local h = LocalPlayer.Character:FindFirstChild("Humanoid")
            if h then
                h.Health = (h.MaxHealth / 100) * v
            end
        end
    end
)

PlayerTab:AddSection("Theft")

local StealToggle = PlayerTab:AddToggle(
    "Steal Speed Hack",
    "steal_hack",
    function(v)
        Config.StealSpeed = v
        if v then
            Xan.Notify({Title = "Theft", Content = "Steal Speed enabled! Stealing " .. Config.StealMultiplier .. "x faster"})
        else
            Xan.Notify({Title = "Theft", Content = "Steal Speed disabled."})
        end
    end
)

PlayerTab:AddSlider(
    "Steal Multiplier",
    "steal_mult",
    {Min = 1, Max = 10, Default = 2},
    function(v)
        Config.StealMultiplier = v
    end
)

--// CONFIG TAB
ConfigTab:AddInput("Config Name", {Flag = "cfg_name", Default = "default"})
ConfigTab:AddButton(
    "Save Config",
    function()
        Xan:SaveConfig(Xan.Flags["cfg_name"] or "default")
    end
)
ConfigTab:AddButton(
    "Load Config",
    function()
        Xan:LoadConfig(Xan.Flags["cfg_name"] or "default")
    end
)
ConfigTab:AddDivider()

--// DEVS TAB
DevsTab:AddSection("Credits")

DevsTab:AddLabel("HOLUB HUB")
DevsTab:AddLabel("Version: 1.0")
DevsTab:AddDivider()
DevsTab:AddLabel("Created by:")
DevsTab:AddLabel("mecharena1")
DevsTab:AddDivider()

DevsTab:AddSection("Information")

DevsTab:AddLabel("Library: Xan Hub")
DevsTab:AddLabel("Exploit: Multi-Compatible")
DevsTab:AddLabel("Platform: Roblox")
DevsTab:AddDivider()

DevsTab:AddButton(
    "Check Updates",
    function()
        Xan.Notify({Title = "Updates", Content = "You are running the latest version!", Type = "Success"})
    end
)

DevsTab:AddSection("Debug Functions")

local DebugToggle = DevsTab:AddToggle(
    "Debug Action Logger",
    "debug_action",
    function(v)
        Config.DebugEnabled = v
        if v then
            Xan.Notify({Title = "Debug", Content = "Debug Action Logger enabled! Press E to log actions.", Type = "Success"})
        else
            Xan.Notify({Title = "Debug", Content = "Debug Action Logger disabled."})
        end
    end
)

DevsTab:AddLabel("Logs actions when E is pressed")

ConfigTab:AddButton(
    "Unload & Cleanup",
    function()
        for _, c in pairs(Connections) do
            c:Disconnect()
        end
        for _, o in pairs(Objects) do
            pcall(
                function()
                    o:Destroy()
                end
            )
        end
        if AndroidButtonFrame then
            pcall(function() AndroidButtonFrame:Destroy() end)
        end
        if LocalPlayer.Character then
            local h = LocalPlayer.Character:FindFirstChild("Humanoid")
            if h then
                h.PlatformStand = false
                h.WalkSpeed = 16
                h.JumpPower = 50
            end
        end
        Watermark:Destroy()
        Xan:Unload()
    end
)

--------------------------------------------------------------------------------
-- LOOPS & LOGIC
--------------------------------------------------------------------------------

local BodyVel, BodyGyro

Connections["Loop"] =
    RunService.Stepped:Connect(
    function()
        local char = LocalPlayer.Character
        if not char then
            return
        end

        local hum = char:FindFirstChild("Humanoid")
        local root = char:FindFirstChild("HumanoidRootPart")

        if Config.Noclip then
            for _, p in pairs(char:GetDescendants()) do
                if p:IsA("BasePart") then
                    p.CanCollide = false
                end
            end
        end

        if hum then
            if Config.SpeedHack then
                hum.WalkSpeed = Config.WalkSpeed
            end
            if Config.JumpHack then
                hum.UseJumpPower = true
                hum.JumpPower = Config.JumpPower
            end
        end

        -- STEAL SPEED HACK
        if Config.StealSpeed then
            pcall(function()
                -- Procura por RemoteEvents de roubo no ReplicatedStorage
                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                
                for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
                    if remote:IsA("RemoteEvent") or remote:IsA("RemoteFunction") then
                        local remoteName = remote.Name:lower()
                        if string.find(remoteName, "steal") or string.find(remoteName, "rob") or string.find(remoteName, "grab") or string.find(remoteName, "take") or string.find(remoteName, "action") then
                            -- Tenta ativar múltiplas vezes baseado no multiplicador
                            if remote:IsA("RemoteEvent") then
                                for i = 1, Config.StealMultiplier do
                                    remote:FireServer()
                                    task.wait(0.05)
                                end
                            end
                        end
                    end
                end
            end)
        end

        if Config.Fly and root then
            if not BodyVel then
                BodyVel = Instance.new("BodyVelocity", root)
                BodyVel.MaxForce = Vector3.new(9e9, 9e9, 9e9)
                table.insert(Objects, BodyVel)
            end
            if not BodyGyro then
                BodyGyro = Instance.new("BodyGyro", root)
                BodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
                BodyGyro.P = 9e4
                table.insert(Objects, BodyGyro)
            end

            hum.PlatformStand = true
            BodyGyro.CFrame = Camera.CFrame
            local dir = Vector3.zero

            -- KEYBOARD INPUT (DESKTOP)
            if not IsAndroid then
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                    dir = dir + Camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                    dir = dir - Camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                    dir = dir - Camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                    dir = dir + Camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.E) then
                    dir = dir + Vector3.new(0, 1, 0)
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.Q) then
                    dir = dir - Vector3.new(0, 1, 0)
                end
            else
                -- ANDROID TOUCH INPUT
                dir = GetAndroidMovementInput()
            end

            BodyVel.Velocity = dir * Config.FlySpeed
        else
            if BodyVel then
                BodyVel:Destroy()
                BodyVel = nil
            end
            if BodyGyro then
                BodyGyro:Destroy()
                BodyGyro = nil
            end
        end
    end
)

Connections["Aim"] =
    RunService.RenderStepped:Connect(
    function()
        if not Config.Aimlock then
            return
        end
        local mouse = UserInputService:GetMouseLocation()
        local best, bestDist = nil, Config.AimRange

        for _, p in pairs(Players:GetPlayers()) do
            if
                p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Humanoid") and
                    p.Character.Humanoid.Health > 0
             then
                local part = nil
                if Config.HitParts.Head then
                    part = p.Character:FindFirstChild("Head")
                end
                if not part and Config.HitParts.Chest then
                    part = p.Character:FindFirstChild("HumanoidRootPart")
                end
                if not part then
                    part = p.Character:FindFirstChild("Head")
                end

                if part then
                    local pos, vis = Camera:WorldToViewportPoint(part.Position)
                    if vis then
                        local dist = (Vector2.new(pos.X, pos.Y) - mouse).Magnitude
                        if dist < bestDist then
                            bestDist = dist
                            best = part
                        end
                    end
                end
            end
        end

        if best then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, best.Position)
        end
    end
)

Connections["InfJump"] =
    UserInputService.JumpRequest:Connect(
    function()
        if Config.InfJump and LocalPlayer.Character then
            LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
)

Connections["Inputs"] =
    UserInputService.InputBegan:Connect(
    function(input, gpe)
        if gpe then
            return
        end
        
        -- DEBUG: Log E key presses
        if input.KeyCode == Enum.KeyCode.E and Config.DebugEnabled then
            local targetObj = nil
            local actionName = "Unknown Action"
            
            -- Try to find what's being interacted with
            local camera = workspace.CurrentCamera
            local rayOrigin = camera.CFrame.Position
            local rayDirection = camera.CFrame.LookVector * 100
            
            local raycastParams = RaycastParams.new()
            raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
            raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
            
            local rayResult = workspace:Raycast(rayOrigin, rayDirection, raycastParams)
            
            if rayResult then
                targetObj = rayResult.Instance
                local parent = targetObj.Parent
                
                -- Try to find action name from parent
                if parent and parent:FindFirstChild("ActionName") then
                    actionName = parent.ActionName.Value
                elseif parent and parent.Name then
                    actionName = parent.Name
                elseif targetObj.Name then
                    actionName = targetObj.Name
                end
                
                local debugMessage = "[HOLUB DEBUG] Action: " .. actionName .. " | Target: " .. (targetObj.Name or "Unknown") .. " | Position: " .. tostring(rayResult.Position)
                
                warn(debugMessage)
                print(debugMessage)
                
                Xan.Notify({
                    Title = "Debug: Action Detected",
                    Content = "Action: " .. actionName .. "\nTarget: " .. (targetObj.Name or "Unknown"),
                    Type = "Info"
                })
            else
                warn("[HOLUB DEBUG] E pressed but no object detected")
                print("[HOLUB DEBUG] E pressed but no object detected")
            end
        end
        
        if input.KeyCode == Enum.KeyCode.U and Config.TargetPlr and Config.TargetPlr.Character then
            LocalPlayer.Character:SetPrimaryPartCFrame(
                Config.TargetPlr.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 4)
            )
            Xan.Notify({Title = "Teleport", Content = "To: " .. Config.TargetPlr.Name})
        end
    end
)

--// ANDROID BUTTON CONNECTIONS
if IsAndroid then
    for _, buttonData in pairs(TouchButtons) do
        buttonData.Button.MouseButton1Click:Connect(function()
            if buttonData.Name == "FlyBtn" then
                FlightTog:Set(not FlightTog.Value())
            elseif buttonData.Name == "SpeedBtn" then
                SpeedTog:Set(not SpeedTog.Value())
            elseif buttonData.Name == "AimBtn" then
                AimToggle:Set(not AimToggle.Value())
            elseif buttonData.Name == "EspBtn" then
                EspToggle:Set(not EspToggle.Value())
            elseif buttonData.Name == "TeleBtn" then
                if Config.TargetPlr and Config.TargetPlr.Character and LocalPlayer.Character then
                    LocalPlayer.Character:SetPrimaryPartCFrame(
                        Config.TargetPlr.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 4)
                    )
                    Xan.Notify({Title = "Teleport", Content = "To: " .. Config.TargetPlr.Name})
                else
                    Xan.Notify({Title = "Error", Content = "Invalid target.", Type = "Error"})
                end
            end
        end)
    end
end

-- Notifies success even though window might still be animating in due to library internal delays
Xan.Notify({Title = "HOLUB HUB", Content = "Loaded.", Icon = GameIcon, Type = "Success"})
